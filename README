Redis Sampler README
====================

Redis sampler is an utility to check the composition of your Redis dataset.

Using it is as simple as typing:

    ./redis-sampler.rb <host> <port> <db> <samplesize>

The host and port arguments are the ones of your Redis instance.
The DB is the database to test. By default Redis uses database 0 unless you
are writing against a different DB.

The sample size is the number of elements to check using RANDOMKEY.
For large datasets a sample size of 100000 or more is recommended.

To understand how the program works you can try a few runs setting the
sampling size to just 1000, for fast execution.

It is highly recommended to run the program via loopback interface or fast
LAN, otherwise the execution time will be pretty high.

Example Output
==============

Sampling localhost:6379 DB:4 with 100000 RANDOMKEYS

TYPES
=====
 zset: 87273 (87.27%)     string: 12542 (12.54%)   set: 102 (0.10%)        
 hash: 57 (0.06%)         list: 26 (0.03%)        

STRINGS, SIZE OF VALUES
=======================
 6: 6199 (49.43%)         7: 1664 (13.27%)         15: 825 (6.58%)         
 13: 825 (6.58%)          5: 469 (3.74%)           31: 338 (2.69%)         
 20: 262 (2.09%)          2: 241 (1.92%)           27: 163 (1.30%)         
 42: 123 (0.98%)          159: 102 (0.81%)         1: 79 (0.63%)           
 47: 65 (0.52%)           34: 51 (0.41%)           38: 47 (0.37%)          
 41: 46 (0.37%)           83: 42 (0.33%)           55: 37 (0.30%)          
 139: 36 (0.29%)          29: 35 (0.28%)           28: 34 (0.27%)          
(suppressed 133 items with perc < 0.5% for a total of 6.85%)
Average: 16.09 Standard Deviation: 27.17

LISTS, NUMBER OF ELEMENTS
=========================
 2: 5 (19.23%)            8: 4 (15.38%)            11: 2 (7.69%)           
 16: 2 (7.69%)            7: 2 (7.69%)             13: 2 (7.69%)           
 5: 1 (3.85%)             6: 1 (3.85%)             14: 1 (3.85%)           
 9: 1 (3.85%)             4: 1 (3.85%)             70: 1 (3.85%)           
 21: 1 (3.85%)            43: 1 (3.85%)            10: 1 (3.85%)           
Average: 12.23 Standard Deviation: 14.17

LISTS, SIZE OF ELEMENTS
=======================
 7: 18 (69.23%)           6: 8 (30.77%)           
Average: 6.69 Standard Deviation: 0.46

SETS, NUMBER OF ELEMENTS
========================
 1: 21705 (24.87%)        2: 10592 (12.14%)        3: 6728 (7.71%)         
 4: 4839 (5.54%)          5: 3669 (4.20%)          6: 3023 (3.46%)         
 7: 2316 (2.65%)          8: 2194 (2.51%)          9: 2031 (2.33%)         
 10: 1812 (2.08%)         11: 1614 (1.85%)         12: 1457 (1.67%)        
 13: 1383 (1.58%)         15: 1236 (1.42%)         14: 1223 (1.40%)        
 16: 1093 (1.25%)         17: 1051 (1.20%)         18: 867 (0.99%)         
 19: 819 (0.94%)          20: 736 (0.84%)          22: 727 (0.83%)         
 21: 687 (0.79%)          23: 654 (0.75%)          24: 572 (0.66%)         
 25: 485 (0.56%)         
(suppressed 917 items with perc < 0.5% for a total of 15.77%)
Average: 4.71 Standard Deviation: 35.46

SETS, SIZE OF ELEMENTS
======================
 19: 86 (84.31%)          4: 7 (6.86%)             3: 6 (5.88%)            
 2: 2 (1.96%)             5: 1 (0.98%)            
Average: 16.56 Standard Deviation: 5.67

SORTED SETS, NUMBER OF ELEMENTS
===============================
 1: 21705 (24.87%)        2: 10592 (12.14%)        3: 6728 (7.71%)         
 4: 4839 (5.54%)          5: 3669 (4.20%)          6: 3023 (3.46%)         
 7: 2316 (2.65%)          8: 2194 (2.51%)          9: 2031 (2.33%)         
 10: 1812 (2.08%)         11: 1614 (1.85%)         12: 1457 (1.67%)        
 13: 1383 (1.58%)         15: 1236 (1.42%)         14: 1223 (1.40%)        
 16: 1093 (1.25%)         17: 1051 (1.20%)         18: 867 (0.99%)         
 19: 819 (0.94%)          20: 736 (0.84%)          22: 727 (0.83%)         
 21: 687 (0.79%)          23: 654 (0.75%)          24: 572 (0.66%)         
 25: 485 (0.56%)         
(suppressed 917 items with perc < 0.5% for a total of 15.77%)
Average: 25.81 Standard Deviation: 112.96

SORTED SETS, SIZE OF ELEMENTS
=============================
 6: 70987 (81.34%)        5: 7652 (8.77%)          4: 6819 (7.81%)         
 3: 1613 (1.85%)          2: 148 (0.17%)           9: 25 (0.03%)           
 1: 8 (0.01%)             8: 8 (0.01%)             7: 6 (0.01%)            
 24: 1 (0.00%)            13: 1 (0.00%)            39: 1 (0.00%)           
 14: 1 (0.00%)            50: 1 (0.00%)            0: 1 (0.00%)            
 27: 1 (0.00%)           
Average: 5.70 Standard Deviation: 0.74

HASHES, NUMBER OF FIELDS
========================
 1: 33 (57.89%)           12: 14 (24.56%)          11: 10 (17.54%)         
Average: 5.46 Standard Deviation: 5.24

HASHES, SIZE OF FIELDS
======================
 17: 33 (57.89%)          22: 14 (24.56%)          13: 10 (17.54%)         
Average: 17.53 Standard Deviation: 2.94

HASHES, SIZE OF VALUES
======================
 13: 11 (19.30%)          3: 11 (19.30%)           408: 6 (10.53%)         
 410: 3 (5.26%)           411: 2 (3.51%)           409: 2 (3.51%)          
 406: 2 (3.51%)           375: 1 (1.75%)           397: 1 (1.75%)          
 392: 1 (1.75%)           2: 1 (1.75%)             354: 1 (1.75%)          
 347: 1 (1.75%)           402: 1 (1.75%)           382: 1 (1.75%)          
 8: 1 (1.75%)             393: 1 (1.75%)           407: 1 (1.75%)          
 396: 1 (1.75%)           394: 1 (1.75%)           350: 1 (1.75%)          
(suppressed 6 items with perc < 0.5% for a total of 10.53%)
Average: 223.81 Standard Deviation: 191.84

